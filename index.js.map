{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/modal.js","../src/js/helpers.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const BASE_URL = 'https://dummyjson.com';\n\n//API ендпоінти:\n\nexport const API_ENDPOINTS = {\n  CATEGORIES: '/products/category-list', // - отримати список категорій продуктів\n  PRODUCTS: '/products', //  - отримати всі продукти з пагінацією (?limit=10&skip=10)\n  CATEGORY_LIST: '/products/category/', // - отримати продукти по категорії\n  PRODUCT_BY_ID: '/products/', // - отримати один продукт по ID\n  PRODUCT_BY_QUERY: '/products/search', //  - пошук продукту по ключовому слову (?q=nail)\n};\n\nexport const PER_PAGE = 12;\n\n// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n","import axios from 'axios';\nimport { API_ENDPOINTS, BASE_URL, PER_PAGE } from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getCategories() {\n  const { data } = await axios(`${API_ENDPOINTS.CATEGORIES}`);\n  return data;\n}\n\nexport async function getProducts(currentPage) {\n  const skip = (currentPage - 1) * PER_PAGE;\n  const { data } = await axios(`${API_ENDPOINTS.PRODUCTS}?limit=${PER_PAGE}&skip=${skip}`);\n  return data;\n}\n\nexport async function getProductList(category, currentPage) {\n  const skip = (currentPage - 1) * PER_PAGE;\n  const { data } = await axios(`${API_ENDPOINTS.CATEGORY_LIST}${category}?limit=${PER_PAGE}&skip=${skip}`);\n  return data;\n}\n\nexport async function getId(id) {\n  const {data} = await axios(`${API_ENDPOINTS.PRODUCT_BY_ID}${id}`)\n  return data;\n}\n","const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  notFound: document.querySelector('.not-found'),\n  loader: document.querySelector('.loader'),\n};\n\nexport default refs;\n","import refs from './refs';\n\nexport function renderCategories(arrey) {\n  const categories = ['All', ...arrey];\n  const murkup = categories\n    .map(\n      category => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>\n`\n    )\n    .join('');\n  refs.categories.innerHTML = murkup;\n}\n\nexport function renderProducts(arr) {\n  const markup = arr\n    .map(\n      ({ id, category, brand, price, title, thumbnail }) => `\n  <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>\n\n  `\n    )\n    .join('');\n  refs.products.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearProdutsList() {\n  refs.products.innerHTML = '';\n}\n\nexport function renderModal({\n  price,\n  title,\n  thumbnail,\n  tags,\n  description,\n  shippingInformation,\n  returnPolicy,\n}) {\n  const markupTags = tags\n    .map(tag => `<li class=\"modal-product__tags\">${tag}</li>`)\n    .join('');\n  const markup = `<img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${markupTags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n  refs.modalProduct.innerHTML = markup;\n}\n","import refs from \"./refs\";\n\nexport function openModal() {\n    refs.modal.classList.add(\"modal--is-open\");\n    document.body.style.overflow = \"hidden\";\n    window.addEventListener(\"keydown\", onEscapeKey);\n    refs.modal.addEventListener(\"click\", onBackDrop);\n}\n export function closeModal() {\n    refs.modal.classList.remove(\"modal--is-open\");\n    document.body.style.overflow = \"\";\n    window.removeEventListener(\"keydown\", onEscapeKey);\n    refs.modal.removeEventListener(\"click\", onBackDrop);\n}\nfunction onEscapeKey(event) {\n    if(event.code === \"Escape\") {\n        closeModal();\n    }\n}\n\nfunction onBackDrop(event) {\n    if (event.target === refs.modal) {\n        closeModal();\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport refs from './refs';\n\niziToast.settings({\n  timeout: 5000,\n  balloon: true,\n  progressBar: false,\n});\n\nexport function showInfo(message) {\n  iziToast.info({\n    message: `${message}`,\n  });\n}\n\nexport function showAttention(message) {\n  iziToast.success({\n    title: 'Ok!',\n    message: `${message}`,\n  });\n}\nexport function showWarning(message) {\n  iziToast.warning({\n    title: 'Attention!',\n    message: `${message}`,\n  });\n}\n\nexport function showError(error) {\n  iziToast.error({\n    title: 'Ooops!',\n    message: `${error.message}`,\n  });\n}\n\nexport function showLoadMoreBtn() {\n  setTimeout(() => {\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  }, 500);\n}\n\nexport function hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nexport function showLoader() {\n  refs.loader.style.display = 'block';\n  hideLoadMoreBtn();\n}\n\nexport function hideLoader() {\n  refs.loader.style.display = 'none';\n}\n","import {\n  getCategories,\n  getId,\n  getProductList,\n  getProducts,\n} from './products-api';\nimport {\n  clearProdutsList,\n  renderCategories,\n  renderModal,\n  renderProducts,\n} from './render-function';\nimport { openModal } from './modal';\nimport {\n  hideLoader,\n  hideLoadMoreBtn,\n  showError,\n  showInfo,\n  showLoader,\n  showLoadMoreBtn,\n} from './helpers';\nimport refs from './refs';\nimport { PER_PAGE } from './constants';\n\nlet currentPage = 1;\nlet currentText = '';\n\nexport async function initialHome() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n    currentText = 'All';\n    const allBtn = refs.categories.children[0].children[0];\n    allBtn.classList.add('categories__btn--active');\n    showLoader();\n    const { products, total, limit, skip } = await getProducts(currentPage);\n    renderProducts(products);\n    showLoadMoreBtn();\n  } catch (error) {\n    showError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function handlerClickCategory(event) {\n  const btn = event.target.closest('.categories__btn');\n  if (!btn) {\n    return;\n  }\n\n  const categoriesChildrenArrey = [...event.currentTarget.children];\n  categoriesChildrenArrey.map(child => {\n    child.children[0].classList.remove('categories__btn--active');\n  });\n\n  clearProdutsList();\n  btn.classList.add('categories__btn--active');\n  currentPage = 1;\n  currentText = btn.textContent;\n  showLoader();\n  try {\n    if (currentText === 'All') {\n      const { products, total, limit, skip } = await getProducts(currentPage);\n      if (!products.length) {\n        refs.notFound.classList.add('not-found--visible');\n        hideLoadMoreBtn();\n        return;\n      }\n      if (limit < PER_PAGE) {\n        hideLoadMoreBtn();\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        showLoadMoreBtn();\n      }\n      renderProducts(products);\n    } else {\n      const { products, total, limit, skip } = await getProductList(\n        currentText,\n        currentPage\n      );\n      if (!products.length) {\n        refs.notFound.classList.add('not-found--visible');\n        hideLoadMoreBtn();\n        return;\n      }\n      if (limit < PER_PAGE) {\n        hideLoadMoreBtn();\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        showLoadMoreBtn();\n      }\n      renderProducts(products);\n    }\n  } catch (error) {\n    showError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function onLoadMoreClick(event) {\n  event.preventDefault();\n  currentPage++;\n  showLoader();\n  try {\n    if (currentText == 'All') {\n      const { products, total, limit, skip } = await getProducts(currentPage);\n      if (limit < PER_PAGE) {\n        hideLoadMoreBtn();\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        showLoadMoreBtn();\n      }\n      renderProducts(products);\n    } else {\n      const { products, total, limit, skip } = await getProductList(\n        currentText,\n        currentPage\n      );\n      if (limit < PER_PAGE) {\n        hideLoadMoreBtn();\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        showLoadMoreBtn();\n      }\n      renderProducts(products);\n    }\n  } catch (error) {\n    showError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function onProductClick(event) {\n  const card = event.target.closest('.products__item');\n  if (!card) return;\n  const productId = Number(card.dataset.id);\n  try {\n    const product = await getId(productId);\n    renderModal(product);\n    openModal();\n  } catch (error) {\n    showError(error);\n  }\n}\n","//Логіка сторінки Home\n\nimport {\n  handlerClickCategory,\n  initialHome,\n  onLoadMoreClick,\n  onProductClick,\n} from './js/handlers';\nimport refs from './js/refs';\n\ndocument.addEventListener('DOMContentLoaded', initialHome);\nrefs.categories.addEventListener('click', handlerClickCategory);\nrefs.products.addEventListener('click', onProductClick);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["BASE_URL","API_ENDPOINTS","PER_PAGE","axios","getCategories","data","getProducts","currentPage","skip","getProductList","category","getId","id","refs","renderCategories","arrey","murkup","renderProducts","arr","markup","brand","price","title","thumbnail","clearProdutsList","renderModal","tags","description","shippingInformation","returnPolicy","markupTags","tag","openModal","onEscapeKey","onBackDrop","closeModal","event","iziToast","showInfo","message","showError","error","showLoadMoreBtn","hideLoadMoreBtn","showLoader","hideLoader","currentText","initialHome","categories","products","total","limit","handlerClickCategory","btn","child","onLoadMoreClick","onProductClick","card","productId","product"],"mappings":"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"}